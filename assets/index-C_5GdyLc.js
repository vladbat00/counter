var l=Object.defineProperty;var p=(s,e,n)=>e in s?l(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n;var o=(s,e,n)=>p(s,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(t){if(t.ep)return;t.ep=!0;const i=n(t);fetch(t.href,i)}})();let a=0,c=[];const m={get value(){return a},set value(s){a=s,c=c.filter(e=>(e.isConnected&&e.onStoreUpdate(),e.isConnected))},subscribe(s){c.push(s)}};globalThis.store=m;const g="/counter/minus.svg",b="/counter/plus.svg";class d extends HTMLElement{onStoreUpdate(){}}class h extends d{constructor(){super();o(this,"digitsCount",4);o(this,"base",2);o(this,"digits",[])}static get observedAttributes(){return["base","digits-count"]}increment(){store.value+=1}decrement(){store.value>1&&(store.value-=1)}connectedCallback(){this.digitsCount=Number(this.getAttribute("digits-count")||4),this.base=Number(this.getAttribute("base")||2);const n=document.createElement("input");n.type="image",n.src=g,n.alt="minus",n.className="counter-button minus-button",n.onclick=()=>this.decrement(),this.appendChild(n);for(let t=this.digitsCount-1;t>=0;t--){const i=document.createElement("counter-digit");i.setAttribute("index",t.toString()),i.setAttribute("base",this.base.toString()),this.appendChild(i)}const r=document.createElement("input");r.type="image",r.src=b,r.alt="plus",r.className="counter-button plus-button",r.onclick=()=>this.increment(),this.appendChild(r)}}class f extends d{constructor(){super();o(this,"index",0);o(this,"base",10);o(this,"input");this.input=document.createElement("input"),this.input.className="digit",this.input.disabled=!0,this.input.inputMode="numeric"}static get observedAttributes(){return["index","base"]}onStoreUpdate(){this.input.value=this.getDigit().toString()}getDigit(){return store.value/Math.pow(this.base,this.index)%this.base}connectedCallback(){store.subscribe(this),this.index=Number(this.getAttribute("index")||0),this.base=Number(this.getAttribute("base")||10),this.input.value=this.getDigit().toString(),this.appendChild(this.input)}}customElements.define("counter-container",h);customElements.define("counter-digit",f);document.querySelector("#app").innerHTML=`
  <div class="rows-container">
    <counter-container base="2" digits-count="7"></counter-container>
    <div class="equal-sign-row">=</div>
    <counter-container base="10" digits-count="3"></counter-container>
  </div>
`;
